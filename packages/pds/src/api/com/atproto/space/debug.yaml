LEXICONS:
  checkPermission:
    lexicon: 1
    id: com.atproto.space.checkPermission
    description: Check if the permission is allowed. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: Check if the permission is allowed.
        parameters:
          type: params
          properties:
            resourceType:
              type: string
              description: The resource type [space,record,etc]
              maxLength: 32
            resource:
              type: string
              description: The object id to assign.
              maxLength: 660
            permission:
              type: string
              description: possible values are defined in the spicedb schema and depend on context
              maxLength: 32
            subjectType:
              type: string
              description: the subject type [user,group,etc]
              maxLength: 32
            subject:
              type: string
              description: the subject id to grant
              maxLength: 643
            caveats:
              type: string
              description: 'nsids: { allowed: map<bool>, default bool, nsid string }'
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - resourceType
            - resource
            - permission
            - subjectType
            - subject
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              allowed:
                type: string
                description: 'one of: [yes,no,conditional,unspecified,unknown]'
            required:
              - allowed
  checkPermissions:
    lexicon: 1
    id: com.atproto.space.checkPermissions
    description: Bulk check if the permission is allowed. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: Bulk check if the permission is allowed.
        parameters:
          type: params
          properties:
            resourceType:
              type: string
              description: The resource type [space,record,etc]
              maxLength: 32
            resources:
              type: array
              description: List of object ids to see if subject is granted the permission.
              items:
                type: string
            permission:
              type: string
              description: possible values are defined in the spicedb schema and depend on context
              maxLength: 32
            subjectType:
              type: string
              description: the subject type [user,group,etc]
              maxLength: 32
            subject:
              type: string
              description: the subject id to grant
              maxLength: 643
            caveats:
              type: string
              description: 'nsids: { allowed: map<bool>, default bool, nsid string }'
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - resourceType
            - resources
            - permission
            - subjectType
            - subject
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              allowed:
                type: array
                description: List ordered the same as input objects, with allowed status.
                items:
                  type: string
                  description: 'one of: [yes,no,conditional,unspecified,unknown]'
            required:
              - allowed
  getBlob:
    lexicon: 1
    id: com.atproto.space.getBlob
    description: Get a blob from a repository. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: Get a blob from a repository.
        auth:
          permission: get_blob
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            space:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
          required:
            - repo
            - cid
        output:
          encoding: '*/*'
  listBlobs:
    lexicon: 1
    id: com.atproto.space.listBlobs
    description: List blobs under a repository. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: List blobs under a repository.
        auth:
          permission: list_blob
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 1000
              default: 500
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            since:
              type: string
              description: Optional revision of the repo to list blobs since. (note, createdAt?)
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              blobs:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - blobs
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          encoding:
            type: string
            maxLength: 64
          size:
            type: integer
        required:
          - uri
          - cid
  lookupResources:
    lexicon: 1
    id: com.atproto.space.lookupResources
    description: List of resource for the given permission for the given subject. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: List of resource for the given permission for the given subject.
        parameters:
          type: params
          properties:
            resourceType:
              type: string
              description: The resource type [space,record,etc]
              maxLength: 32
            resource:
              type: string
              description: The object id to assign.
              maxLength: 660
            permission:
              type: string
              description: possible values are defined in the spicedb schema and depend on context
              maxLength: 32
            subjectType:
              type: string
              description: the subject type [user,group,etc]
              maxLength: 32
            subject:
              type: string
              description: the subject id to grant
              maxLength: 643
            caveats:
              type: string
              description: 'nsids: { allowed: map<bool>, default bool, nsid string }'
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - permission
            - subjectType
            - subject
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              resources:
                type: array
                description: List of all the resources the subject has the given permission.
                items:
                  type: string
                  description: subject ids
            required:
              - resources
  lookupSubjects:
    lexicon: 1
    id: com.atproto.space.lookupSubjects
    description: List of subjects with the given permission over the resource. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: List of subjects with the given permission over the resource.
        parameters:
          type: params
          properties:
            resourceType:
              type: string
              description: The resource type [space,record,etc]
              maxLength: 32
            resource:
              type: string
              description: The object id to assign.
              maxLength: 660
            permission:
              type: string
              description: possible values are defined in the spicedb schema and depend on context
              maxLength: 32
            subjectType:
              type: string
              description: the subject type [user,group,etc]
              maxLength: 32
            subject:
              type: string
              description: the subject id to grant
              maxLength: 643
            caveats:
              type: string
              description: 'nsids: { allowed: map<bool>, default bool, nsid string }'
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - resourceType
            - resource
            - permission
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              subjects:
                type: array
                description: List of all the subjects that have the given permission on the object.
                items:
                  type: string
                  description: subject ids
            required:
              - subjects
  space:
    lexicon: 1
    id: com.atproto.space.space
    description: Spaces are nesting sets of groups, roles, content, and their relations. Requires auth, implemented by PDS.
    defs:
      main:
        type: record
        description: Spaces are nesting sets of groups, roles, content, and their relations.
        key: any
        record:
          type: object
          properties:
            displayName:
              type: string
              maxGraphemes: 64
              maxLength: 640
            description:
              type: string
              description: Free-form profile description text.
              maxGraphemes: 256
              maxLength: 2560
            avatar:
              type: blob
              description: Small image to be displayed next to posts from account. AKA, 'profile picture'
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            banner:
              type: blob
              description: Larger horizontal image to display behind profile view.
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            labels:
              type: union
              description: Self-label values, specific to the Bluesky application, on the overall account.
              refs:
                - com.atproto.label.defs#selfLabels
            createdAt:
              type: string
              format: datetime
  getSpace:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a space from a repository.
        auth:
          permission: get_space
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a space from a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.getSpace
  describeSpace:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a space from a repository with extra information.
        auth:
          permission: get_space
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a space from a repository with extra information. Requires auth, implemented by PDS.
    id: com.atproto.space.describeSpace
  listSpaces:
    lexicon: 1
    defs:
      main:
        type: query
        description: List spaces under a repository.
        auth:
          permission: list_space
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              spaces:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - spaces
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
    description: List spaces under a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.listSpaces
  createSpace:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Create a new repository space, errors if it exists.
        auth:
          permission: create_space
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
    description: Create a new repository space, errors if it exists. Requires auth, implemented by PDS.
    id: com.atproto.space.createSpace
  updateSpace:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Update an existing space, errors if it does not exist.
        auth:
          permission: update_space
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
    description: Update an existing space, errors if it does not exist. Requires auth, implemented by PDS.
    id: com.atproto.space.updateSpace
  deleteSpace:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Delete a space and everything associated with it.
        auth:
          permission: delete_space
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
    description: Delete a space and everything associated with it. Requires auth, implemented by PDS.
    id: com.atproto.space.deleteSpace
  bubble:
    lexicon: 1
    id: com.atproto.space.bubble
    description: Bubbles are interchangeable with Spaces. They break permission walking to enable more private 'spaces' in a more public 'space', both can be completely private as well. Requires auth, implemented by PDS.
    defs:
      main:
        type: record
        description: Bubbles are interchangeable with Spaces. They break permission walking to enable more private 'spaces' in a more public 'space', both can be completely private as well.
        key: any
        record:
          type: object
          properties:
            displayName:
              type: string
              maxGraphemes: 64
              maxLength: 640
            description:
              type: string
              description: Free-form profile description text.
              maxGraphemes: 256
              maxLength: 2560
            avatar:
              type: blob
              description: Small image to be displayed next to posts from account. AKA, 'profile picture'
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            banner:
              type: blob
              description: Larger horizontal image to display behind profile view.
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            labels:
              type: union
              description: Self-label values, specific to the Bluesky application, on the overall account.
              refs:
                - com.atproto.label.defs#selfLabels
            createdAt:
              type: string
              format: datetime
  getBubble:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a bubble from a repository.
        auth:
          permission: get_bubble
          objectType: bubble
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a bubble from a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.getBubble
  describeBubble:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a bubble from a repository with extra information.
        auth:
          permission: get_bubble
          objectType: bubble
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a bubble from a repository with extra information. Requires auth, implemented by PDS.
    id: com.atproto.space.describeBubble
  listBubbles:
    lexicon: 1
    defs:
      main:
        type: query
        description: List bubbles under a repository.
        auth:
          permission: list_bubble
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              bubbles:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - bubbles
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
    description: List bubbles under a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.listBubbles
  createBubble:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Create a new repository bubble, errors if it exists.
        auth:
          permission: create_bubble
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
    description: Create a new repository bubble, errors if it exists. Requires auth, implemented by PDS.
    id: com.atproto.space.createBubble
  updateBubble:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Update an existing bubble, errors if it does not exist.
        auth:
          permission: update_bubble
          objectType: bubble
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
    description: Update an existing bubble, errors if it does not exist. Requires auth, implemented by PDS.
    id: com.atproto.space.updateBubble
  deleteBubble:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Delete a bubble and everything associated with it.
        auth:
          permission: delete_bubble
          objectType: bubble
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
    description: Delete a bubble and everything associated with it. Requires auth, implemented by PDS.
    id: com.atproto.space.deleteBubble
  group:
    lexicon: 1
    id: com.atproto.space.group
    description: Groups are sets of members composed from accounts, services, apikeys, other groups, etc... Requires auth, implemented by PDS.
    defs:
      main:
        type: record
        description: Groups are sets of members composed from accounts, services, apikeys, other groups, etc...
        key: any
        record:
          type: object
          properties:
            displayName:
              type: string
              maxGraphemes: 64
              maxLength: 640
            description:
              type: string
              description: Free-form profile description text.
              maxGraphemes: 256
              maxLength: 2560
            avatar:
              type: blob
              description: Small image to be displayed next to posts from account. AKA, 'profile picture'
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            banner:
              type: blob
              description: Larger horizontal image to display behind profile view.
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            labels:
              type: union
              description: Self-label values, specific to the Bluesky application, on the overall account.
              refs:
                - com.atproto.label.defs#selfLabels
            createdAt:
              type: string
              format: datetime
  getGroup:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a group from a repository.
        auth:
          permission: get_group
          objectType: group
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a group from a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.getGroup
  describeGroup:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a group from a repository with extra information.
        auth:
          permission: get_group
          objectType: group
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a group from a repository with extra information. Requires auth, implemented by PDS.
    id: com.atproto.space.describeGroup
  listGroups:
    lexicon: 1
    defs:
      main:
        type: query
        description: List groups under a repository.
        auth:
          permission: list_group
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              groups:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - groups
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
    description: List groups under a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.listGroups
  createGroup:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Create a new repository group, errors if it exists.
        auth:
          permission: create_group
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
    description: Create a new repository group, errors if it exists. Requires auth, implemented by PDS.
    id: com.atproto.space.createGroup
  updateGroup:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Update an existing group, errors if it does not exist.
        auth:
          permission: update_group
          objectType: group
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
    description: Update an existing group, errors if it does not exist. Requires auth, implemented by PDS.
    id: com.atproto.space.updateGroup
  deleteGroup:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Delete a group and everything associated with it.
        auth:
          permission: delete_group
          objectType: group
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
    description: Delete a group and everything associated with it. Requires auth, implemented by PDS.
    id: com.atproto.space.deleteGroup
  role:
    lexicon: 1
    id: com.atproto.space.role
    description: Roles are a collection of permissions that all members get. They are compositional. Requires auth, implemented by PDS.
    defs:
      main:
        type: record
        description: Roles are a collection of permissions that all members get. They are compositional.
        key: any
        record:
          type: object
          properties:
            displayName:
              type: string
              maxGraphemes: 64
              maxLength: 640
            description:
              type: string
              description: Free-form profile description text.
              maxGraphemes: 256
              maxLength: 2560
            avatar:
              type: blob
              description: Small image to be displayed next to posts from account. AKA, 'profile picture'
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            banner:
              type: blob
              description: Larger horizontal image to display behind profile view.
              accept:
                - image/png
                - image/jpeg
              maxSize: 1000000
            labels:
              type: union
              description: Self-label values, specific to the Bluesky application, on the overall account.
              refs:
                - com.atproto.label.defs#selfLabels
            createdAt:
              type: string
              format: datetime
  getRole:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a role from a repository.
        auth:
          permission: get_role
          objectType: role
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a role from a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.getRole
  describeRole:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a role from a repository with extra information.
        auth:
          permission: get_role
          objectType: role
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a role from a repository with extra information. Requires auth, implemented by PDS.
    id: com.atproto.space.describeRole
  listRoles:
    lexicon: 1
    defs:
      main:
        type: query
        description: List roles under a repository.
        auth:
          permission: list_role
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              roles:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - roles
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
    description: List roles under a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.listRoles
  createRole:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Create a new repository role, errors if it exists.
        auth:
          permission: create_role
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
    description: Create a new repository role, errors if it exists. Requires auth, implemented by PDS.
    id: com.atproto.space.createRole
  updateRole:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Update an existing role, errors if it does not exist.
        auth:
          permission: update_role
          objectType: role
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
    description: Update an existing role, errors if it does not exist. Requires auth, implemented by PDS.
    id: com.atproto.space.updateRole
  deleteRole:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Delete a role and everything associated with it.
        auth:
          permission: delete_role
          objectType: role
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
    description: Delete a role and everything associated with it. Requires auth, implemented by PDS.
    id: com.atproto.space.deleteRole
  relation:
    lexicon: 1
    id: com.atproto.space.relation
    description: A relation tuple [resource, relation, subject]. Subject is acct:<did> whereas the others depend ... Subjects will eventually expand as well Requires auth, implemented by PDS.
    defs:
      main:
        type: record
        description: A relation tuple [resource, relation, subject]. Subject is acct:<did> whereas the others depend ... Subjects will eventually expand as well
        key: any
        record:
          type: object
          properties:
            subjectType:
              type: string
              description: the subject type [user,group,etc]
              maxLength: 32
            subject:
              type: string
              description: the subject id to grant
              maxLength: 643
            permission:
              type: string
              description: possible values are defined in the spicedb schema and depend on context
              maxLength: 32
            resourceType:
              type: string
              description: The resource type [space,record,etc]
              maxLength: 32
            resource:
              type: string
              description: The object id to assign.
              maxLength: 660
            caveats:
              type: string
              description: 'nsids: { allowed: map<bool>, default bool, nsid string }'
            createdAt:
              type: string
              format: datetime
  getRelation:
    lexicon: 1
    defs:
      main:
        type: query
        description: Get a relation from a repository.
        auth:
          permission: get_relation
          objectType: relation
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
    description: Get a relation from a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.getRelation
  listRelations:
    lexicon: 1
    defs:
      main:
        type: query
        description: List relations under a repository.
        auth:
          permission: list_relation
          objectType: space
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              relations:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - relations
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
    description: List relations under a repository. Requires auth, implemented by PDS.
    id: com.atproto.space.listRelations
  createRelation:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Create a new repository relation, errors if it exists.
        auth:
          permission: create_relation
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
    description: Create a new repository relation, errors if it exists. Requires auth, implemented by PDS.
    id: com.atproto.space.createRelation
  updateRelation:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Update an existing relation, errors if it does not exist.
        auth:
          permission: update_relation
          objectType: relation
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
    description: Update an existing relation, errors if it does not exist. Requires auth, implemented by PDS.
    id: com.atproto.space.updateRelation
  deleteRelation:
    lexicon: 1
    defs:
      main:
        type: procedure
        description: Delete a relation and everything associated with it.
        auth:
          permission: delete_relation
          objectType: relation
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
    description: Delete a relation and everything associated with it. Requires auth, implemented by PDS.
    id: com.atproto.space.deleteRelation
  getRecord:
    lexicon: 1
    id: com.atproto.space.getRecord
    description: Get a record from a repository. Requires auth, implemented by PDS.
    defs:
      main:
        auth:
          permission: get_record
          objectType: record
        description: Get a record from a repository.
        parameters:
          properties:
            collection:
              description: The NSID of the record type.
              format: nsid
              maxLength: 256
              type: string
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            rkey:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
            - rkey
          type: params
        type: query
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                description: The CID of the resource.
                type: string
                format: cid
              value:
                type: unknown
                description: Some value, lexicon and implementation dependent.
            required:
              - uri
              - value
  listRecords:
    lexicon: 1
    id: com.atproto.space.listRecords
    description: List records under a repository. Requires auth, implemented by PDS.
    defs:
      main:
        auth:
          permission: list_record
          objectType: space
        description: List records under a repository.
        parameters:
          properties:
            collection:
              description: The NSID of the record type.
              format: nsid
              maxLength: 256
              type: string
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 100
              default: 50
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            zookie:
              type: string
              description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
          required:
            - repo
          type: params
        type: query
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              records:
                type: array
                items:
                  type: ref
                  ref: '#record'
            required:
              - records
      record:
        type: object
        properties:
          uri:
            type: string
            format: at-uri
          cid:
            description: The CID of the resource.
            type: string
            format: cid
          value:
            type: unknown
            description: Some value, lexicon and implementation dependent.
        required:
          - uri
          - cid
          - value
  createRecord:
    lexicon: 1
    id: com.atproto.space.createRecord
    description: Create a new repository record, errors if it exists. Requires auth, implemented by PDS.
    defs:
      main:
        parameters:
          properties:
            collection:
              description: The NSID of the record type.
              format: nsid
              maxLength: 256
              type: string
          type: params
        type: procedure
        description: Create a new repository record, errors if it exists.
        auth:
          permission: create_record
          objectType: space
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                type: string
                description: The id of the space associated with the repo.
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
  updateRecord:
    lexicon: 1
    id: com.atproto.space.updateRecord
    description: Update an existing record, errors if it does not exist. Requires auth, implemented by PDS.
    defs:
      main:
        parameters:
          properties:
            collection:
              description: The NSID of the record type.
              format: nsid
              maxLength: 256
              type: string
          type: params
        type: procedure
        description: Update an existing record, errors if it does not exist.
        auth:
          permission: update_record
          objectType: record
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              parent:
                description: The id of the parent space to nest under. If not set, the current value or /root is assumed. Can be used to move a space or bubble.
                type: string
                format: record-key
                maxLength: 64
              rkey:
                description: The id of the space.
                type: string
                format: record-key
                maxLength: 64
              record:
                type: unknown
                description: The record itself. Must contain a $type field.
              validate:
                type: boolean
                description: Can be set to 'false' to skip Lexicon schema validation of record data, 'true' to require it, or leave unset to validate only for known Lexicons.
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
              - record
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
  deleteRecord:
    lexicon: 1
    id: com.atproto.space.deleteRecord
    description: Delete a record and everything associated with it. Requires auth, implemented by PDS.
    defs:
      main:
        parameters:
          properties:
            collection:
              description: The NSID of the record type.
              format: nsid
              maxLength: 256
              type: string
          type: params
        type: procedure
        description: Delete a record and everything associated with it.
        auth:
          permission: delete_record
          objectType: record
        input:
          encoding: application/json
          schema:
            type: object
            properties:
              repo:
                type: string
                description: The handle or DID of the repo (aka, current account).
                format: at-identifier
                maxLength: 256
              rkey:
                type: string
                format: record-key
                maxLength: 64
              swapCID:
                description: Compare and swap with the previous record by CID.
                type: string
                format: cid
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
            required:
              - repo
              - rkey
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
              zookie:
                type: string
                description: The Zanzibar/SpiceDB consistency token, very similar in intent to CIDs in ATProto.
  uploadBlob:
    lexicon: 1
    id: com.atproto.space.uploadBlob
    description: Upload a new blob, to be referenced from a repository record. The blob will be deleted if it is not referenced within a time window (eg, minutes). Blob restrictions (mimetype, size, etc) are enforced when the reference is created. Requires auth, implemented by PDS.
    defs:
      main:
        type: procedure
        description: Upload a new blob, to be referenced from a repository record. The blob will be deleted if it is not referenced within a time window (eg, minutes). Blob restrictions (mimetype, size, etc) are enforced when the reference is created.
        auth:
          permission: create_blob
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            space:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
          required:
            - repo
            - space
        input:
          encoding: '*/*'
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              uri:
                type: string
                format: at-uri
              cid:
                type: string
                format: cid
              validationStatus:
                type: string
                knownValues:
                  - valid
                  - unknown
              status:
                type: string
                description: a human readable status message
            required:
              - uri
              - cid
  deleteBlob:
    lexicon: 1
    id: com.atproto.space.deleteBlob
    description: Delete a blob from a repository. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: Delete a blob from a repository.
        auth:
          permission: get_blob
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            space:
              type: string
              description: The id of the space.
              format: record-key
              maxLength: 64
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            cid:
              type: string
              description: The CID of the version of the resource. If not specified, then return the most recent version.
              format: cid
          required:
            - repo
            - cid
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              status:
                type: string
                description: a human readable status message
  listMissingBlobs:
    lexicon: 1
    id: com.atproto.space.listMissingBlobs
    description: Returns a list of missing blobs for the requesting account. Intended to be used in the account migration flow. Requires auth, implemented by PDS.
    defs:
      main:
        type: query
        description: Returns a list of missing blobs for the requesting account. Intended to be used in the account migration flow.
        auth:
          permission: list_blob
        parameters:
          type: params
          properties:
            repo:
              type: string
              description: The handle or DID of the repo (aka, current account).
              format: at-identifier
              maxLength: 256
            parent:
              type: string
              description: The id of the context space to operate under.
              format: record-key
              maxLength: 64
            limit:
              type: integer
              minimum: 1
              maximum: 1000
              default: 500
              description: The number of records to return.
            cursor:
              type: string
            reverse:
              type: boolean
              description: Flag to reverse the order of the returned records.
            since:
              type: string
              description: Optional revision of the repo to list blobs since. (note, createdAt?)
          required:
            - repo
        output:
          encoding: application/json
          schema:
            type: object
            properties:
              cursor:
                type: string
              blobs:
                type: array
                items:
                  type: ref
                  ref: '#recordBlob'
            required:
              - blobs
      recordBlob:
        type: object
        properties:
          cid:
            type: string
            format: cid
          recordUri:
            type: string
            format: at-uri
        required:
          - cid
          - recordUri
